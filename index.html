<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart PHC Medicine Store - Secure Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

<!-- External Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js"></script>

<style>
body{font-family:Arial,sans-serif;background:#f5fdfc;margin:0;}
.auth-container{max-width:360px;margin:80px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.auth-container input{width:100%;padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:5px;}
.auth-container button{width:100%;padding:10px;background:linear-gradient(90deg,#0077b6,#00b894);color:#fff;font-weight:bold;border:none;border-radius:5px;cursor:pointer;}
.auth-container button:hover{background:#00b894;}
header{background:linear-gradient(90deg,#0077b6,#00b894);color:#fff;padding:15px;text-align:center;font-size:22px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;}
#logoutBtn{background:#fff;color:#0077b6;border:none;padding:6px 12px;border-radius:5px;cursor:pointer;font-weight:bold;}
#logoutBtn:hover{background:#ffeaa7;}
nav{display:flex;background-color:#e3f6f5;border-bottom:1px solid #ccc;}
nav button{flex:1;padding:12px;border:none;background:transparent;font-size:16px;cursor:pointer;}
nav button.active{border-bottom:3px solid #0077b6;font-weight:bold;color:#0077b6;}
.tab-content{display:none;padding:20px;}
.tab-content.active{display:block;}
.alert{background:#ffeaa7;padding:10px;margin-bottom:15px;border-left:5px solid #fdcb6e;}
.controls{display:flex;flex-wrap:wrap;gap:18px;align-items:end;margin-bottom:15px;}
.form-group{display:flex;flex-direction:column;}
.form-group label{color:#0077b6;font-size:14px;margin-bottom:4px;font-weight:600;letter-spacing:0.2px;display:flex;align-items:center;gap:5px;}
input[type="file"],input[type="text"],select{border-radius:8px;border:1px solid #b0e2e0;padding:6px 10px;font-size:15px;background:#e3f6f5;transition:border 0.2s,box-shadow 0.2s;}
input[type="file"]:hover,input[type="text"]:hover,select:hover{border:1.5px solid #00b894;box-shadow:0 1px 3px rgba(0,0,0,0.08);}
.button-group{flex-direction:row;gap:8px;}
button{border-radius:8px;background:linear-gradient(90deg,#0077b6,#00b894);border:none;padding:8px 14px;font-size:14px;font-weight:600;cursor:pointer;color:#fff;white-space:nowrap;}
button:hover{background:#00b894;}
table{width:100%;border-collapse:collapse;background:#fff;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
th{background:#d0f0ec;}
</style>
</head>
<body>

<!-- Login -->
<div id="loginSection" class="auth-container">
  <h2>Login</h2>
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- Dashboard -->
<div id="dashboard" style="display:none;">
<header>
  üíä Smart PHC Medicine Store
  <button id="logoutBtn" onclick="logout()">Logout</button>
</header>

<nav>
  <button class="tab-btn active" data-tab="stock">Medicine Stock</button>
  <button class="tab-btn" data-tab="nearExpiry">Near Expiry</button>
  <button class="tab-btn" data-tab="qr">QR Scanner</button>
  <button class="tab-btn" data-tab="reports">Reports</button>
</nav>

<!-- Stock Tab -->
<div id="stock" class="tab-content active">
  <div class="controls">
    <div class="form-group"><label for="excelFile">üì• Import Excel</label><input type="file" id="excelFile" accept=".xlsx,.xls"></div>
    <div class="form-group"><label for="pdfFile">üìÑ Ack PDF</label><input type="file" id="pdfFile" accept="application/pdf"></div>
    <div class="form-group"><label for="rackFilter">üóÑ Rack</label><select id="rackFilter"><option value="">All Racks</option></select></div>
    <div class="form-group"><label for="searchBox">üîç Search</label><input type="text" id="searchBox" placeholder="Search medicine..."></div>
    <div class="form-group button-group"><button onclick="exportExcel()">üìä Excel
